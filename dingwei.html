<!DOCTYPE html>  
<html>  
<meta charset="utf-8">  
<style type="text/css">
    body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
    </style>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>  
<script src="http://api.map.baidu.com/components?ak=A3mKldoVgijKfMeWVHF2Gcat5sE2DkHC"></script>    
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=百度API的秘钥（需要申请）"></script>   
<body>  
 
<div id="allmap">
 <div ng-app="myApp" ng-controller="myCtrl">  
<!-- <button type="button" ng-click='getAddr()'>定位</button><br>   -->
<img style="cursor: pointer;" src="dingwei.png" width="50" height="70" ng-click='getAddr()' >
</div>    


</div>

<script>  
var app = angular.module('myApp', []);  
app.controller('myCtrl', function($scope) {  
        //获取地理位置信息    
        $scope.getAddr = function() {    
        var geolocation = new BMap.Geolocation();    
        geolocation.getCurrentPosition(    
            //获取位置信息成功    
            function(position){
            var map = new BMap.Map("allmap");    // 创建Map实例
            map.centerAndZoom(new BMap.Point(position.point.lng, position.point.lat), 11);
            map.addControl(new BMap.MapTypeControl({
                mapTypes:[
                    BMAP_NORMAL_MAP,
                    BMAP_HYBRID_MAP
                ]}));
            map.setCurrentCity(position.address.city); 
            map.enableScrollWheelZoom(true);
                    });    
                    };  

}); 

</script>  
</body>  
</html>  
